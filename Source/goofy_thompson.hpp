#pragma once

#include "Function.hpp"
#include <windows.h>

struct naughty_sinoussi_0x800;
class Game_0x40;
class Network_20324;

class PacketHeader
{
  public:
    s32 field_0_type;
    s32 field_4_sub_type;
};

class Packet_SubType_3
{
  public:
    PacketHeader header;
    char_type field_8;
    s32 field_9;
    s32 field_D;
    s32 field_11_len;
};

class Nework_2C
{
  public:
    s32 field_0;
    s32 field_4;
    s32 field_8;
    s32 field_C;
    s32 field_10;
    s32 field_14;
    s32 field_18;
    s32 field_1C;
    s32 field_20;
    s32 field_24;
    s32 field_28;
};

class Network_Unknown
{
  public:
    s32 field_0_group_id;
    s32 field_4_count;
    char_type field_8[4];
    s32 field_C;
    s32 field_10;
    s32 field_14;
    Nework_2C field_18_ary_start[6];

    // TODO: uncomment when dplay.h is available
    //tagDPSESSIONDESC2 field_120_session_desc;
};

class EnumeratedConnection
{
  public:
    GUID field_0_sp_guid;
    wchar_t* field_10_pConnectionName;
    void* field_14_pConnection;
    s32 field_18_connection_len;
};

// TODO: remove when dplay.h is available
struct DPNAME;
struct tagDPSESSIONDESC2;

struct goofy_thompson
{
    EXPORT goofy_thompson* ctor_51D6B0();
    EXPORT void* vdtor_51D7B0(char_type flags);
    EXPORT void dtor_51D7D0();
    EXPORT void AddEnumeratedConnection_51D930(EnumeratedConnection* pConnectionInfo);
    EXPORT s32 EnumConnections_cb_51DA30(GUID* lpguidSP,
                                         const void* lpConnection,
                                         u32 dwConnectionSize,
                                         DPNAME* lpName,
                                         s32 dwFlags,
                                         goofy_thompson* lpContext);
    EXPORT s32 SetProtoAndConnection_51DAE0(GUID* pProtocolGuid, s32 pUseThisConnection);
    EXPORT void DirectPlayDestroy_51DC90();
    EXPORT s32 DirectPlayCreate_51DCD0();
    EXPORT s32 DirectPlayCreate_51DED0();
    EXPORT s32 sub_51E030(const void* a1, s32 a2, LPCSTR lpString, goofy_thompson* pThis);
    EXPORT s32 sub_51E0E0(wchar_t* Source);
    EXPORT s32 NoRefs_51E140(wchar_t* String, s32* a3, size_t* a4);
    EXPORT s32 NoRefs_51E2B0(wchar_t* Source, wchar_t* a3, s32* a4, size_t* a5);
    EXPORT s32 NoRefs_51E450(s32 a2, u32* a3, size_t* a4);
    EXPORT s32 sub_51E5C0();
    EXPORT s32 sub_51E650();
    EXPORT s32 sub_51E7A0(wchar_t* Source, wchar_t* a3, s32 a4, s32* a5);
    EXPORT u32 sub_51E9C0(s32 a1, s32 a2, s32 a3, s32 a4, wchar_t* Source, s32 a6, s32 a7);
    EXPORT s32 EnumSessions_cb_51EAE0(tagDPSESSIONDESC2* lpThisSD, s32 lpDwTimeOut, char_type dwFlags, goofy_thompson* lpContext);
    EXPORT s32 AddEnumeratedSession_51EB00(tagDPSESSIONDESC2* pSession);
    EXPORT void sub_51ECD0(s32 pFunc, Network_20324* pParam);
    EXPORT void sub_51ED00();
    EXPORT s32 Send_51EF60();
    EXPORT char_type Receive_51F010(s32* pOutData, s32* pOutDataLen, s32* recvId, u32* senderId);
    EXPORT void sub_51F0D0(char_type* a2, s32 a3, s32 a4, s32 a5);
    EXPORT void sub_51F110(s32 a2, s32 a3, s32 a4, s32 a5);
    EXPORT s32 CalcPacketLen_51F210(u32 pPacket);
    EXPORT void MakeSendData_51F420(Packet_SubType_3* pPacket, s32* pData, u32* pDataLen);
    EXPORT void sub_51F870(char_type* pPacket, s32 packetLen, s32 recvId, s32 a5);
    EXPORT s32 sub_520040(s32 toFind, Network_Unknown* pStru, s32 a3, u32* pOutIdx);
    EXPORT void sub_5201A0(s32 idx, Network_Unknown* pStru);
    EXPORT s32 sub_520230(s32 a2, u32* a3);
    EXPORT void sub_520530(s32 pFunc, s32 pParam);
    EXPORT s32 sub_520570(int session_idx, wchar_t* a3, s32* a4, s32* a5);
    EXPORT s32 EnumGroups_cb_520C20(s32 a1, s32 a2, s32 a3, char_type a4, u32* a5);
    EXPORT s32 sub_520CA0(s32 a2, s32 a3);
    EXPORT s32 sub_520D00(s32 a2);
    EXPORT void sub_520D10();
    EXPORT void sub_520DE0(Network_Unknown* pStru);
    EXPORT u32 IndexOf_520E30(s32 toFind, Network_Unknown* pObj);
    EXPORT void sub_520E60(s32 pFunc, s32 pParam);
    EXPORT void sub_520E80(s32 a2, s32 a3);
    EXPORT void NoRefs_null_520EA0();
    EXPORT s32 sub_520EB0(s32 a2, s32 a3, Network_Unknown* a4);
    EXPORT s32 sub_520F50(s32 a2, s32 a3);
    EXPORT s32 sub_520F80(wchar_t* String2);
    EXPORT s32 DeletePlayerFromGroup_521000(u32 idx);
    EXPORT s32 SendChatMessage_521060(wchar_t* pMsg, s32 idx_always_m1);
    EXPORT void sub_5210D0(s32 a2, s32 a3);
    EXPORT void GetPlayerName_521100(wchar_t* Destination, u32 idx);
    EXPORT s32 sub_521140(s32 a2, s32 a3);
    EXPORT s32 sub_521170(s32 a2);
    EXPORT s32 sub_5211F0(s32 a2, s32 a3);
    EXPORT void sub_521220();
    EXPORT s32 SetExitGameCallBack_521330(s32 pFunc, Game_0x40* pGame);
    EXPORT s32 GetMaxPlayers_521350();
    EXPORT s32 Send_521370();
    EXPORT bool sub_5213E0();
    EXPORT s32 NoRefs_5215B0(u32 a2, u32* a3, size_t* a4);
    EXPORT s32 Send_521630(s32 pData, s32 idx, char_type a4);
    EXPORT void Add_5216E0(s32 a2, s32** a3, s32 a4, char_type a5);
    EXPORT u32 sub_521770(u32* a2, char_type* a3, u32* a4);
    EXPORT s32 sub_521820(s32** a2, s32 idx);
    EXPORT void Remove_521870(s32 idx);
    EXPORT char_type sub_521890(s32** a3, s32* arg4, u32* a4);
    EXPORT void Send_521B20(s32* a2);
    EXPORT s32 NoRefs_Send_521BE0(s32* a2, s32 a3);
    EXPORT s32 NoRefs_Send_521C80(s32 a2);
    EXPORT s32 Send_521D20();
    EXPORT s32 Send_521DB0(s32 dataLen);
    EXPORT s32 Send_521E40(s32 a2);
    EXPORT void static_dtor_5E4DD0();

    s32 field_0_vtbl;
    char_type field_4;
    char_type field_5;
    char_type field_6;
    char_type field_7;
    s32 field_8;
    s32 field_C;
    s32 field_10;
    s32 field_14;
    s32 field_18;
    s32 field_1C;
    s32 field_20;
    s32 field_24;
    s32 field_28;
    s32 field_2C;
    s32 field_30[6];
    s32 field_48;
    s32 field_4C[30];
    s32 field_C4[321];
    s32 field_5C8;
    s32 field_5CC;
    s32 field_5D0;
    s32 field_5D4;
    s32 field_5D8;
    HANDLE field_5DC_hEvent;
    s32 field_5E0;
    s32 field_5E4_ppDPlay;
    s32 field_5E8;
    s32 field_5EC;
    s32 field_5F0;
    s32 field_5F4;
    s32 field_5F8;
    s32 field_5FC;
    s32 field_600;
    s32 field_604;
    s32 field_608;
    s32 field_60C;
    s32 field_610;
    s32 field_614;
    s32 field_618;
    s32 field_61C;
    s32 field_620;
    s32 field_624;
    s32 field_628;
    s32 field_62C;
    s32 field_630;
    s32 field_634;
    s32 field_638;
    s32 field_63C;
    s32 field_640;
    s32 field_644;
    s32 field_648;
    s32 field_64C;
    s32 field_650;
    s32 field_654;
    s32 field_658;
    s32 field_65C;
    s32 field_660;
    s32 field_664;
    s32 field_668;
    s32 field_66C;
    s32 field_670;
    s32 field_674;
    s32 field_678;
    s32 field_67C;
    s32 field_680;
    s32 field_684;
    s32 field_688;
    s32 field_68C;
    s32 field_690;
    s32 field_694;
    s32 field_698;
    s32 field_69C;
    s32 field_6A0;
    s32 field_6A4;
    s32 field_6A8;
    s32 field_6AC;
    s32 field_6B0;
    s32 field_6B4;
    s32 field_6B8;
    s32 field_6BC;
    s32 field_6C0;
    s32 field_6C4;
    s32 field_6C8;
    s32 field_6CC;
    s32 field_6D0;
    s32 field_6D4;
    s32 field_6D8;
    s32 field_6DC;
    s32 field_6E0;
    s32 field_6E4;
    s32 field_6E8;
    s32 field_6EC;
    s32 field_6F0;
    s32 field_6F4;
    s32 field_6F8;
    s32 field_6FC;
    s32 field_700;
    s32 field_704;
    s32 field_708;
    s32 field_70C;
    s32 field_710;
    s32 field_714;
    s32 field_718;
    s32 field_71C;
    s32 field_720;
    s32 field_724;
    s32 field_728;
    s32 field_72C;
    s32 field_730;
    s32 field_734;
    s32 field_738;
    s32 field_73C;
    s32 field_740;
    s32 field_744;
    s32 field_748;
    s32 field_74C;
    s32 field_750;
    s32 field_754;
    BYTE field_758[368];
    naughty_sinoussi_0x800* field_8C8[6];
    s32 field_8E0_p0x1800_2;
    s32 field_8E4_p0x1800_1;
    s32 field_8E8;
    s32 field_8EC;
    char_type field_8F0;
    char_type field_8F1;
    char_type field_8F2;
    char_type field_8F3;
    s32 field_8F4;
    s32 field_8F8;
    s32 field_8FC;
    s32 field_900;
    s32 field_904;
    s32 field_908_pstruc_208q;
    s32 field_90C;
    s32 field_910;
    s32 field_914;
    s32 field_918;
    s32 field_91C;
    s32 field_920;
    s32 field_924;
    s32 field_928;
    s32 field_92C;
    s32 field_930;
    s32 field_934;
    s32 field_938;
    s32 field_93C;
    s32 field_940;
    s32 field_944;
    s32 field_948;
    s32 field_94C;
    s32 field_950;
    s32 field_954;
    s32 field_958;
    s32 field_95C;
    s32 field_960;
    s32 field_964;
    s32 field_968;
    s32 field_96C;
    s32 field_970;
    s32 field_974;
    s32 field_978;
    s32 field_97C;
    s32 field_980;
    s32 field_984;
    s32 field_988;
    s32 field_98C;
    s32 field_990;
    s32 field_994;
    s32 field_998;
    s32 field_99C;
    s32 field_9A0;
    s32 field_9A4;
    s32 field_9A8;
    s32 field_9AC;
    s32 field_9B0;
    s32 field_9B4;
    s32 field_9B8;
    s32 field_9BC;
    s32 field_9C0;
    s32 field_9C4;
    s32 field_9C8;
    s32 field_9CC;
    s32 field_9D0;
    s32 field_9D4;
    s32 field_9D8;
    s32 field_9DC;
    s32 field_9E0;
    s32 field_9E4;
    s32 field_9E8;
    s32 field_9EC;
    s32 field_9F0;
    s32 field_9F4;
    s32 field_9F8;
    s32 field_9FC;
    s32 field_A00;
    s32 field_A04;
    s32 field_A08;
    s32 field_A0C;
    s32 field_A10;
    s32 field_A14;
    s32 field_A18;
    s32 field_A1C;
    s32 field_A20;
    s32 field_A24;
    s32 field_A28;
    s32 field_A2C;
    s32 field_A30;
    s32 field_A34;
    s32 field_A38;
    s32 field_A3C;
    s32 field_A40;
    s32 field_A44;
    s32 field_A48;
    s32 field_A4C;
    s32 field_A50;
    s32 field_A54;
    s32 field_A58;
    s32 field_A5C;
    s32 field_A60;
    s32 field_A64;
    s32 field_A68;
    s32 field_A6C;
    s32 field_A70;
    s32 field_A74;
    s32 field_A78;
    s32 field_A7C;
    s32 field_A80;
    s32 field_A84;
    s32 field_A88;
    s32 field_A8C;
    s32 field_A90;
    s32 field_A94;
    s32 field_A98;
    s32 field_A9C;
    s32 field_AA0;
    s32 field_AA4;
    s32 field_AA8;
    s32 field_AAC;
    s32 field_AB0;
    s32 field_AB4;
    s32 field_AB8;
    s32 field_ABC;
    s32 field_AC0;
    s32 field_AC4;
    s32 field_AC8;
    s32 field_ACC;
    s32 field_AD0;
    s32 field_AD4;
    s32 field_AD8;
    s32 field_ADC;
    s32 field_AE0;
    s32 field_AE4;
    s32 field_AE8;
    s32 field_AEC;
    s32 field_AF0;
    s32 field_AF4;
    s32 field_AF8;
    s32 field_AFC;
    s32 field_B00;
    s32 field_B04;
    s32 field_B08;
    s32 field_B0C;
    s32 field_B10;
    s32 field_B14;
    s32 field_B18;
    s32 field_B1C;
    s32 field_B20;
    s32 field_B24;
    s32 field_B28;
    s32 field_B2C;
    s32 field_B30;
    s32 field_B34;
    s32 field_B38;
    s32 field_B3C;
    s32 field_B40;
    s32 field_B44;
    s32 field_B48;
    s32 field_B4C;
    s32 field_B50;
    s32 field_B54;
    s32 field_B58;
    s32 field_B5C;
    s32 field_B60;
    s32 field_B64;
    s32 field_B68;
    s32 field_B6C;
    s32 field_B70;
    s32 field_B74;
    s32 field_B78;
    s32 field_B7C;
    s32 field_B80;
    s32 field_B84;
    s32 field_B88;
    s32 field_B8C;
    s32 field_B90;
    s32 field_B94;
    s32 field_B98;
    s32 field_B9C;
    s32 field_BA0;
    s32 field_BA4;
    s32 field_BA8;
    s32 field_BAC;
    s32 field_BB0;
    s32 field_BB4;
    s32 field_BB8;
    s32 field_BBC;
    s32 field_BC0;
    s32 field_BC4;
    s32 field_BC8;
    s32 field_BCC;
    s32 field_BD0;
    s32 field_BD4;
    s32 field_BD8;
    s32 field_BDC;
    s32 field_BE0;
    s32 field_BE4;
    s32 field_BE8;
    s32 field_BEC;
    s32 field_BF0;
    s32 field_BF4;
    s32 field_BF8;
    s32 field_BFC;
    s32 field_C00;
    s32 field_C04;
    s32 field_C08;
    s32 field_C0C;
    s32 field_C10;
    s32 field_C14;
    s32 field_C18;
    s32 field_C1C;
    s32 field_C20;
    s32 field_C24;
    s32 field_C28;
    s32 field_C2C;
    s32 field_C30;
    s32 field_C34;
    s32 field_C38;
    s32 field_C3C;
    s32 field_C40;
    s32 field_C44;
    s32 field_C48;
    s32 field_C4C;
    s32 field_C50;
    s32 field_C54;
    s32 field_C58;
    s32 field_C5C;
    s32 field_C60;
    s32 field_C64;
    s32 field_C68;
    s32 field_C6C;
    s32 field_C70;
    s32 field_C74;
    s32 field_C78;
    s32 field_C7C;
    s32 field_C80;
    s32 field_C84;
    s32 field_C88;
    s32 field_C8C;
    s32 field_C90;
    s32 field_C94;
    s32 field_C98;
    s32 field_C9C;
    s32 field_CA0;
    s32 field_CA4;
    s32 field_CA8;
    s32 field_CAC;
    s32 field_CB0;
    s32 field_CB4;
    s32 field_CB8;
};

EXPORT_VAR extern goofy_thompson gGoofy_thompson_7071E8;
